
before_script:
  - add-apt-repository deb http://ru.archive.ubuntu.com/ubuntu/ xenial xenial-backports main restricted universe multiverse
  - add-apt-repository deb-src http://ru.archive.ubuntu.com/ubuntu/ xenial xenial-backports main restricted universe multiverse
  - add-apt-repository deb http://ru.archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse
  - add-apt-repository deb-src http://ru.archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse
  - apt install luarocks -y
  - luarocks install moonscript

dlib:
  stage: build
  script:
    - mkdir lua
    - moonc -t lua moon/*
    - cp lua_src/* lua/ -Rv
  artifacts:
    paths:
      - lua/*

# luacheck:
#   allow_failure: yes
#   script: sh luacheck.sh

# moonlint:
#   allow_failure: yes
#   script: moonc -l moon/*
